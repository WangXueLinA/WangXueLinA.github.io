---
toc: content
title: Nodejs
---

# Nodejs

## 特性：

### 单线程

在 Java、php 等服务器端语言中，会为每一个客户端连接创建一个新的线程，每个线程会消耗内存，想要 Web 应用程序支持更多的用户，就需要增加服务器的数量。Node.js 不为每个客户连接创建一个新的线程，而仅仅使用一个线程。当有用户连接了，就触发一个内部事件，通过非阻塞 I/O、事件驱动机制，让 Node.js 程序宏观上也是并行的。

好处：减少了内存开销，操作系统的内存换页，最擅长高并发。

坏处：一个用户造成了线程的崩溃，整个服务都崩溃了，其他人也崩溃了

### 非阻塞 I/O

当访问数据库取得数据时，需要一段时间。在传统的单线程处理机制中，在执行了访问数据库代码之后，整个线程都将暂停下来，等待数据库返回结果，才能执行后面的代码。也就是说，I/O 阻塞了代码的执行，极大地降低了程序的执行效率。由于 Node.js 中采用了非阻塞型 I/O 机制，因此在执行了访问数据库的代码之后，立即执行其后面的代码，把数据库返回结果的处理代码放在回调函数中，从而提高了程序的执行效率。阻塞模式下，一个线程只能处理一项任务，要想提高吞吐量必须通过多线程。而非阻塞模式下，一个线程永远在执行计算操作，这个线程的 CPU 核心利用率永远是 100%。nodejs 不会傻等 I/O 语句结束，而会执行后面的语句

### 事件驱动

Node 中，在一个时刻，只能执行一个事件回调函数，但是在执行一个事件回调函数的中途，可以转而处理其他事件（比如，又有新用户连接了），然后返回继续执行原事件的回调函数，这种处理机制，称为“事件环”机制。Node.js 中所有的 I/O 都是异步的，

## 环境

Node.js 的使用 JavaScript 进行编程，运行在 JavaScript 引擎上（V8）。
